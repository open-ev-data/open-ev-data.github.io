<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The single source of truth for electric vehicle specifications"><meta name=author content="OpenEV Data Contributors"><link href=https://open-ev-data.github.io/1.2.x/api/ARCHITECTURE/ rel=canonical><link href=../GET_STARTED/ rel=prev><link href=../TESTING/ rel=next><link rel=icon href=../../assets/images/open-ev-data-logo.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Architecture - OpenEV Data</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9WVEN4C4XH"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9WVEN4C4XH",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9WVEN4C4XH",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=amber> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#architecture-reference-openev-data-api class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="OpenEV Data" class="md-header__button md-logo" aria-label="OpenEV Data" data-md-component=logo> <img src=../../assets/images/open-ev-data-logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> OpenEV Data </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Architecture </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=amber aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=amber aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/open-ev-data title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> open-ev-data </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../governance/ class=md-tabs__link> Project Governance </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> API Documentation </a> </li> <li class=md-tabs__item> <a href=../../dataset/ class=md-tabs__link> Dataset Documentation </a> </li> <li class=md-tabs__item> <a href=../../changelog-api/ class=md-tabs__link> Changelog </a> </li> <li class=md-tabs__item> <a href=../../guides/contributing/ class=md-tabs__link> Guides </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="OpenEV Data" class="md-nav__button md-logo" aria-label="OpenEV Data" data-md-component=logo> <img src=../../assets/images/open-ev-data-logo.svg alt=logo> </a> OpenEV Data </label> <div class=md-nav__source> <a href=https://github.com/open-ev-data title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> open-ev-data </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../getting-started/ class="md-nav__link "> <span class=md-ellipsis> Getting Started </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/quick-start/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../governance/ class="md-nav__link "> <span class=md-ellipsis> Project Governance </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Project Governance </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../governance/GET_STARTED/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../governance/CONTRIBUTING/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../../governance/CODE_OF_CONDUCT/ class=md-nav__link> <span class=md-ellipsis> Code of Conduct </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> API Documentation </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> API Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../GET_STARTED/ class=md-nav__link> <span class=md-ellipsis> Get Started </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Architecture </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-introduction-architectural-style class=md-nav__link> <span class=md-ellipsis> 1. Introduction &amp; Architectural Style </span> </a> <nav class=md-nav aria-label="1. Introduction & Architectural Style"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11-system-objective class=md-nav__link> <span class=md-ellipsis> 1.1. System Objective </span> </a> </li> <li class=md-nav__item> <a href=#12-build-time-vs-runtime-strategy class=md-nav__link> <span class=md-ellipsis> 1.2. Build-Time vs Runtime Strategy </span> </a> </li> <li class=md-nav__item> <a href=#13-component-roles-crates class=md-nav__link> <span class=md-ellipsis> 1.3. Component Roles (Crates) </span> </a> </li> <li class=md-nav__item> <a href=#14-architectural-principles class=md-nav__link> <span class=md-ellipsis> 1.4. Architectural Principles </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-file-directory-tree class=md-nav__link> <span class=md-ellipsis> 2. File Directory Tree </span> </a> </li> <li class=md-nav__item> <a href=#3-system-relationship-diagram class=md-nav__link> <span class=md-ellipsis> 3. System Relationship Diagram </span> </a> <nav class=md-nav aria-label="3. System Relationship Diagram"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dependency-flow class=md-nav__link> <span class=md-ellipsis> Dependency Flow </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-operational-data-flow class=md-nav__link> <span class=md-ellipsis> 4. Operational Data Flow </span> </a> <nav class=md-nav aria-label="4. Operational Data Flow"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pipeline-stages class=md-nav__link> <span class=md-ellipsis> Pipeline Stages </span> </a> <nav class=md-nav aria-label="Pipeline Stages"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#build-time-cicd class=md-nav__link> <span class=md-ellipsis> Build-Time (CI/CD) </span> </a> </li> <li class=md-nav__item> <a href=#runtime-api-server class=md-nav__link> <span class=md-ellipsis> Runtime (API Server) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#5-technology-stack-versioning class=md-nav__link> <span class=md-ellipsis> 5. Technology Stack &amp; Versioning </span> </a> <nav class=md-nav aria-label="5. Technology Stack & Versioning"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#51-language-environment class=md-nav__link> <span class=md-ellipsis> 5.1. Language Environment </span> </a> </li> <li class=md-nav__item> <a href=#52-core-libraries class=md-nav__link> <span class=md-ellipsis> 5.2. Core Libraries </span> </a> </li> <li class=md-nav__item> <a href=#53-etl-specific-libraries class=md-nav__link> <span class=md-ellipsis> 5.3. ETL-Specific Libraries </span> </a> </li> <li class=md-nav__item> <a href=#54-server-specific-libraries class=md-nav__link> <span class=md-ellipsis> 5.4. Server-Specific Libraries </span> </a> </li> <li class=md-nav__item> <a href=#55-development-testing class=md-nav__link> <span class=md-ellipsis> 5.5. Development &amp; Testing </span> </a> </li> <li class=md-nav__item> <a href=#56-infrastructure-deployment class=md-nav__link> <span class=md-ellipsis> 5.6. Infrastructure &amp; Deployment </span> </a> </li> <li class=md-nav__item> <a href=#57-api-standards class=md-nav__link> <span class=md-ellipsis> 5.7. API Standards </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#6-etl-pipeline-specification class=md-nav__link> <span class=md-ellipsis> 6. ETL Pipeline Specification </span> </a> <nav class=md-nav aria-label="6. ETL Pipeline Specification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#61-input-processing class=md-nav__link> <span class=md-ellipsis> 6.1. Input Processing </span> </a> <nav class=md-nav aria-label="6.1. Input Processing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#discovery-phase class=md-nav__link> <span class=md-ellipsis> Discovery Phase </span> </a> </li> <li class=md-nav__item> <a href=#file-classification class=md-nav__link> <span class=md-ellipsis> File Classification </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#62-merge-strategy class=md-nav__link> <span class=md-ellipsis> 6.2. Merge Strategy </span> </a> <nav class=md-nav aria-label="6.2. Merge Strategy"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#merge-rules class=md-nav__link> <span class=md-ellipsis> Merge Rules </span> </a> </li> <li class=md-nav__item> <a href=#output-cardinality class=md-nav__link> <span class=md-ellipsis> Output Cardinality </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#63-validation-pipeline class=md-nav__link> <span class=md-ellipsis> 6.3. Validation Pipeline </span> </a> </li> <li class=md-nav__item> <a href=#64-output-formats class=md-nav__link> <span class=md-ellipsis> 6.4. Output Formats </span> </a> <nav class=md-nav aria-label="6.4. Output Formats"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#641-canonical-json-vehiclesjson class=md-nav__link> <span class=md-ellipsis> 6.4.1. Canonical JSON (vehicles.json) </span> </a> </li> <li class=md-nav__item> <a href=#642-sqlite-database-vehiclesdb class=md-nav__link> <span class=md-ellipsis> 6.4.2. SQLite Database (vehicles.db) </span> </a> </li> <li class=md-nav__item> <a href=#643-postgresql-schema-vehiclessql class=md-nav__link> <span class=md-ellipsis> 6.4.3. PostgreSQL Schema (vehicles.sql) </span> </a> </li> <li class=md-nav__item> <a href=#644-csv-export-vehiclescsv class=md-nav__link> <span class=md-ellipsis> 6.4.4. CSV Export (vehicles.csv) </span> </a> </li> <li class=md-nav__item> <a href=#645-xml-export-vehiclesxml class=md-nav__link> <span class=md-ellipsis> 6.4.5. XML Export (vehicles.xml) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#65-error-handling-and-reporting class=md-nav__link> <span class=md-ellipsis> 6.5. Error Handling and Reporting </span> </a> <nav class=md-nav aria-label="6.5. Error Handling and Reporting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#validation-errors class=md-nav__link> <span class=md-ellipsis> Validation Errors </span> </a> </li> <li class=md-nav__item> <a href=#statistics-generation class=md-nav__link> <span class=md-ellipsis> Statistics Generation </span> </a> </li> <li class=md-nav__item> <a href=#exit-codes class=md-nav__link> <span class=md-ellipsis> Exit Codes </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#7-api-server-specification class=md-nav__link> <span class=md-ellipsis> 7. API Server Specification </span> </a> <nav class=md-nav aria-label="7. API Server Specification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#71-architecture class=md-nav__link> <span class=md-ellipsis> 7.1. Architecture </span> </a> </li> <li class=md-nav__item> <a href=#72-endpoints class=md-nav__link> <span class=md-ellipsis> 7.2. Endpoints </span> </a> <nav class=md-nav aria-label="7.2. Endpoints"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#get-apiv1health class=md-nav__link> <span class=md-ellipsis> GET /api/v1/health </span> </a> </li> <li class=md-nav__item> <a href=#get-apiv1vehicles class=md-nav__link> <span class=md-ellipsis> GET /api/v1/vehicles </span> </a> </li> <li class=md-nav__item> <a href=#get-apiv1vehiclesmakemodelyear class=md-nav__link> <span class=md-ellipsis> GET /api/v1/vehicles/{make}/{model}/{year} </span> </a> </li> <li class=md-nav__item> <a href=#get-apiv1vehiclesmakemodelyearvariants class=md-nav__link> <span class=md-ellipsis> GET /api/v1/vehicles/{make}/{model}/{year}/variants </span> </a> </li> <li class=md-nav__item> <a href=#get-apiv1makes class=md-nav__link> <span class=md-ellipsis> GET /api/v1/makes </span> </a> </li> <li class=md-nav__item> <a href=#get-apiv1makesmakemodels class=md-nav__link> <span class=md-ellipsis> GET /api/v1/makes/{make}/models </span> </a> </li> <li class=md-nav__item> <a href=#get-apiv1search class=md-nav__link> <span class=md-ellipsis> GET /api/v1/search </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#73-configuration class=md-nav__link> <span class=md-ellipsis> 7.3. Configuration </span> </a> </li> <li class=md-nav__item> <a href=#74-performance-characteristics class=md-nav__link> <span class=md-ellipsis> 7.4. Performance Characteristics </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#8-cicd-pipeline class=md-nav__link> <span class=md-ellipsis> 8. CI/CD Pipeline </span> </a> <nav class=md-nav aria-label="8. CI/CD Pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#81-dataset-repository-pipeline class=md-nav__link> <span class=md-ellipsis> 8.1. Dataset Repository Pipeline </span> </a> </li> <li class=md-nav__item> <a href=#82-api-repository-pipeline class=md-nav__link> <span class=md-ellipsis> 8.2. API Repository Pipeline </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#9-deployment-scenarios class=md-nav__link> <span class=md-ellipsis> 9. Deployment Scenarios </span> </a> <nav class=md-nav aria-label="9. Deployment Scenarios"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#91-embedded-mode-sqlite class=md-nav__link> <span class=md-ellipsis> 9.1. Embedded Mode (SQLite) </span> </a> </li> <li class=md-nav__item> <a href=#92-container-deployment-docker class=md-nav__link> <span class=md-ellipsis> 9.2. Container Deployment (Docker) </span> </a> </li> <li class=md-nav__item> <a href=#93-postgresql-mode class=md-nav__link> <span class=md-ellipsis> 9.3. PostgreSQL Mode </span> </a> </li> <li class=md-nav__item> <a href=#94-serverless-edge-future class=md-nav__link> <span class=md-ellipsis> 9.4. Serverless / Edge (Future) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#10-development-workflow class=md-nav__link> <span class=md-ellipsis> 10. Development Workflow </span> </a> <nav class=md-nav aria-label="10. Development Workflow"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#101-initial-setup class=md-nav__link> <span class=md-ellipsis> 10.1. Initial Setup </span> </a> </li> <li class=md-nav__item> <a href=#102-etl-development-cycle class=md-nav__link> <span class=md-ellipsis> 10.2. ETL Development Cycle </span> </a> </li> <li class=md-nav__item> <a href=#103-server-development-cycle class=md-nav__link> <span class=md-ellipsis> 10.3. Server Development Cycle </span> </a> </li> <li class=md-nav__item> <a href=#104-release-process class=md-nav__link> <span class=md-ellipsis> 10.4. Release Process </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#11-future-enhancements class=md-nav__link> <span class=md-ellipsis> 11. Future Enhancements </span> </a> <nav class=md-nav aria-label="11. Future Enhancements"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#phase-2-api-improvements class=md-nav__link> <span class=md-ellipsis> Phase 2 - API Improvements </span> </a> </li> <li class=md-nav__item> <a href=#phase-3-edge-computing class=md-nav__link> <span class=md-ellipsis> Phase 3 - Edge Computing </span> </a> </li> <li class=md-nav__item> <a href=#phase-4-analytics class=md-nav__link> <span class=md-ellipsis> Phase 4 - Analytics </span> </a> </li> <li class=md-nav__item> <a href=#phase-5-data-quality class=md-nav__link> <span class=md-ellipsis> Phase 5 - Data Quality </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#12-summary class=md-nav__link> <span class=md-ellipsis> 12. Summary </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../TESTING/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=../RUST_GUIDELINES/ class=md-nav__link> <span class=md-ellipsis> Rust Guidelines </span> </a> </li> <li class=md-nav__item> <a href=../RELEASE_STRATEGY/ class=md-nav__link> <span class=md-ellipsis> Release Strategy </span> </a> </li> <li class=md-nav__item> <a href=../API_ERRORS/ class=md-nav__link> <span class=md-ellipsis> API Errors </span> </a> </li> <li class=md-nav__item> <a href=../PROBLEM_DETAILS_RFC_7807/ class=md-nav__link> <span class=md-ellipsis> Problem Details RFC </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_9> <label class=md-nav__link for=__nav_4_9 id=__nav_4_9_label tabindex> <span class=md-ellipsis> Crates </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_9_label aria-expanded=false> <label class=md-nav__title for=__nav_4_9> <span class="md-nav__icon md-icon"></span> Crates </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../CRATE_EV_CORE/ class=md-nav__link> <span class=md-ellipsis> ev-core </span> </a> </li> <li class=md-nav__item> <a href=../CRATE_EV_ETL/ class=md-nav__link> <span class=md-ellipsis> ev-etl </span> </a> </li> <li class=md-nav__item> <a href=../CRATE_EV_SERVER/ class=md-nav__link> <span class=md-ellipsis> ev-server </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../../dataset/ class="md-nav__link "> <span class=md-ellipsis> Dataset Documentation </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Dataset Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../dataset/HOW_TO_CONSUME/ class=md-nav__link> <span class=md-ellipsis> How to Consume </span> </a> </li> <li class=md-nav__item> <a href=../../dataset/ARCHITECTURE/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../dataset/SCHEMA/ class=md-nav__link> <span class=md-ellipsis> Schema Reference </span> </a> </li> <li class=md-nav__item> <a href=../../dataset/RELEASE_PROCESS/ class=md-nav__link> <span class=md-ellipsis> Release Process </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Changelog </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Changelog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../changelog-api/ class=md-nav__link> <span class=md-ellipsis> API Changelog </span> </a> </li> <li class=md-nav__item> <a href=../../changelog-dataset/ class=md-nav__link> <span class=md-ellipsis> Dataset Changelog </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=../.. class=md-path__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-path__item> <a href=../ class=md-path__link> <span class=md-ellipsis> API Documentation </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <h1 id=architecture-reference-openev-data-api>Architecture Reference: OpenEV Data API<a class=headerlink href=#architecture-reference-openev-data-api title="Anchor link to this section for reference">&para;</a></h1> <h2 id=1-introduction-architectural-style>1. Introduction &amp; Architectural Style<a class=headerlink href=#1-introduction-architectural-style title="Anchor link to this section for reference">&para;</a></h2> <p>The <strong>OpenEV Data API</strong> is engineered using <strong>Hexagonal Architecture (Ports and Adapters)</strong>, implemented via a <strong>Rust Cargo Workspace</strong>. This architectural choice strictly enforces the <strong>Dependency Rule</strong>, ensuring that the business logic (Core) remains independent of frameworks, databases, and external interfaces.</p> <h3 id=11-system-objective>1.1. System Objective<a class=headerlink href=#11-system-objective title="Anchor link to this section for reference">&para;</a></h3> <p>The system serves two primary objectives:</p> <ol> <li><strong>Data Processing Pipeline (ETL)</strong>: Transform the layered JSON dataset into multiple ready-to-consume formats:</li> <li>Complete canonical JSON (all vehicles expanded and validated)</li> <li>SQLite database (embedded, ready-to-query)</li> <li>PostgreSQL schema + data (production-ready)</li> <li>CSV export (analysis and spreadsheet integration)</li> <li> <p>XML export (legacy system compatibility)</p> </li> <li> <p><strong>API Server</strong>: Provide a high-performance REST API to query vehicle data, deployable in multiple environments (containers, serverless, edge).</p> </li> </ol> <p>The system prioritizes <strong>correctness</strong> (via strict typing), <strong>reproducibility</strong> (deterministic builds), and <strong>portability</strong> (multiple output formats and deployment targets).</p> <h3 id=12-build-time-vs-runtime-strategy>1.2. Build-Time vs Runtime Strategy<a class=headerlink href=#12-build-time-vs-runtime-strategy title="Anchor link to this section for reference">&para;</a></h3> <p><strong>Build-Time (CI/CD Pipeline):</strong> - Dataset compilation happens during the release process - Validation and merge logic executed once - Multiple output artifacts generated and attached to releases - Ensures data quality before distribution</p> <p><strong>Runtime (API Server):</strong> - Serves pre-compiled, validated data - No runtime validation overhead - Optimized for read performance - Stateless and horizontally scalable</p> <h3 id=13-component-roles-crates>1.3. Component Roles (Crates)<a class=headerlink href=#13-component-roles-crates title="Anchor link to this section for reference">&para;</a></h3> <p>The workspace is divided into three distinct crates, each representing a specific architectural layer:</p> <ul> <li> <p><strong><code>crates/ev-core</code> (The Core / Inner Hexagon):</strong></p> <ul> <li><strong>Role:</strong> Pure Domain Library</li> <li><strong>Responsibility:</strong> Defines domain types (<code>Vehicle</code>, <code>Battery</code>, <code>Charging</code>, etc.), validation rules, and business logic. Contains no I/O, HTTP, or Database code. Shared dependency for all other crates.</li> <li><strong>Principle:</strong> "Make invalid states unrepresentable"</li> <li><strong>Key Features:</strong><ul> <li>Rust structs mirroring the JSON schema</li> <li>Serde serialization/deserialization</li> <li>Type-safe enums for classifications</li> <li>Validation logic for data integrity</li> <li>Schema generation support</li> </ul> </li> </ul> </li> <li> <p><strong><code>crates/ev-etl</code> (Data Processing Pipeline):</strong></p> <ul> <li><strong>Role:</strong> CLI Tool for Batch Processing</li> <li><strong>Responsibility:</strong> Executes during CI/CD to transform source data into distributable artifacts</li> <li><strong>Key Features:</strong><ul> <li>Reads layered JSON files from dataset repository</li> <li>Implements deep merge strategy (base.json → year → variant)</li> <li>Validates against JSON schema and domain types</li> <li>Generates multiple output formats:<ul> <li><code>vehicles.json</code> - Complete canonical dataset</li> <li><code>vehicles.db</code> - SQLite database with full schema</li> <li><code>vehicles.sql</code> - PostgreSQL DDL + INSERT statements</li> <li><code>vehicles.csv</code> - Flattened tabular export</li> <li><code>vehicles.xml</code> - XML representation</li> </ul> </li> <li>Provides validation reports and statistics</li> </ul> </li> </ul> </li> <li> <p><strong><code>crates/ev-server</code> (API Server):</strong></p> <ul> <li><strong>Role:</strong> HTTP REST API Server</li> <li><strong>Responsibility:</strong> Exposes vehicle data through HTTP endpoints</li> <li><strong>Key Features:</strong><ul> <li>RESTful API design</li> <li>Query by make, model, year, variant</li> <li>Search and filter capabilities</li> <li>OpenAPI/Swagger documentation</li> <li>Multiple deployment targets:<ul> <li>Standalone binary (Linux/Windows/macOS)</li> <li>Docker container</li> <li>Kubernetes deployment</li> <li>Serverless functions (future)</li> <li>Edge workers (future)</li> </ul> </li> </ul> </li> </ul> </li> </ul> <h3 id=14-architectural-principles>1.4. Architectural Principles<a class=headerlink href=#14-architectural-principles title="Anchor link to this section for reference">&para;</a></h3> <ol> <li><strong>Dependency Inversion:</strong> High-level modules (Adapters) depend on low-level modules (Core). The Core depends on nothing.</li> <li><strong>Single Source of Truth:</strong> The dataset repository is the canonical source; all artifacts are derived.</li> <li><strong>Zero-Cost Abstractions:</strong> Usage of Rust Generics and Traits over runtime polymorphism for compile-time optimization.</li> <li><strong>Type-Driven Development:</strong> Leverage Rust's type system to prevent invalid states.</li> <li><strong>Deterministic Builds:</strong> Same input always produces identical output.</li> <li><strong>Format Agnostic Core:</strong> Core domain logic is independent of serialization formats.</li> </ol> <hr> <h2 id=2-file-directory-tree>2. File Directory Tree<a class=headerlink href=#2-file-directory-tree title="Anchor link to this section for reference">&para;</a></h2> <p>This structure represents the physical layout of the Monorepo/Workspace.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>open-ev-data-api/
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>├── .github/
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>│   ├── workflows/
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>│   │   ├── ci.yml                # Quality Gates (Clippy, Fmt, Test)
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>│   │   ├── etl-artifacts.yml     # ETL Pipeline: Build and Attach Artifacts
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>│   │   └── release.yml           # Semantic Release + Docker Build
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>│   └── CODEOWNERS                # Governance
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>├── .cargo/
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>│   └── config.toml               # Global build flags
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>├── crates/                       # [WORKSPACE MEMBERS]
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>│   │
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>│   ├── ev-core/                  # [LAYER: DOMAIN]
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>│   │   ├── Cargo.toml
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>│   │   └── src/
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>│   │       ├── lib.rs            # Library entry point
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>│   │       ├── domain/           # Domain Entities
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>│   │       │   ├── mod.rs
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>│   │       │   ├── vehicle.rs    # Main aggregate root
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>│   │       │   ├── battery.rs    # Battery specifications
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>│   │       │   ├── charging.rs   # Charging capabilities
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>│   │       │   ├── powertrain.rs # Motor and drivetrain
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>│   │       │   ├── range.rs      # Range and efficiency
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>│   │       │   └── types.rs      # Common types and enums
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>│   │       └── validation/       # Validation rules
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>│   │           └── mod.rs
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>│   │
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a>│   ├── ev-etl/                   # [LAYER: DATA PROCESSING]
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a>│   │   ├── Cargo.toml
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a>│   │   └── src/
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a>│   │       ├── main.rs           # CLI entry point
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a>│   │       ├── ingest/           # Data ingestion
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a>│   │       │   ├── mod.rs
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a>│   │       │   ├── reader.rs     # File system reader
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a>│   │       │   └── parser.rs     # JSON parsing
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a>│   │       ├── merge/            # Deep merge logic
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a>│   │       │   ├── mod.rs
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a>│   │       │   └── strategy.rs   # Merge precedence rules
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a>│   │       ├── validate/         # Validation pipeline
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a>│   │       │   └── mod.rs
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a>│   │       └── output/           # Output generators
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a>│   │           ├── mod.rs
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a>│   │           ├── json.rs       # Canonical JSON output
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a>│   │           ├── sqlite.rs     # SQLite database generator
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a>│   │           ├── postgresql.rs # PostgreSQL schema + data
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a>│   │           ├── csv.rs        # CSV export
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a>│   │           └── xml.rs        # XML export
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a>│   │
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a>│   └── ev-server/                # [LAYER: API SERVER]
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a>│       ├── Cargo.toml
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a>│       └── src/
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51 href=#__codelineno-0-51></a>│           ├── main.rs           # Binary entry point
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52 href=#__codelineno-0-52></a>│           ├── config.rs         # Configuration management
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53 href=#__codelineno-0-53></a>│           ├── api/              # HTTP Handlers
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54 href=#__codelineno-0-54></a>│           │   ├── mod.rs
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55 href=#__codelineno-0-55></a>│           │   ├── routes.rs     # Route definitions
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56 href=#__codelineno-0-56></a>│           │   ├── vehicles.rs   # Vehicle endpoints
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57 href=#__codelineno-0-57></a>│           │   ├── search.rs     # Search endpoints
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58 href=#__codelineno-0-58></a>│           │   └── health.rs     # Health check
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59 href=#__codelineno-0-59></a>│           ├── db/               # Database layer
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60 href=#__codelineno-0-60></a>│           │   ├── mod.rs
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61 href=#__codelineno-0-61></a>│           │   ├── sqlite.rs     # SQLite connection
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62 href=#__codelineno-0-62></a>│           │   └── postgresql.rs # PostgreSQL connection (optional)
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63 href=#__codelineno-0-63></a>│           └── models/           # API response models
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64 href=#__codelineno-0-64></a>│               └── mod.rs
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65 href=#__codelineno-0-65></a>│
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66 href=#__codelineno-0-66></a>├── tests/                        # [INTEGRATION TESTS]
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67 href=#__codelineno-0-67></a>│   ├── etl_pipeline_test.rs      # ETL processing tests
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68 href=#__codelineno-0-68></a>│   ├── merge_logic_test.rs       # Merge strategy tests
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69 href=#__codelineno-0-69></a>│   ├── output_format_test.rs     # Output validation tests
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70 href=#__codelineno-0-70></a>│   └── api_integration_test.rs   # API endpoint tests
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71 href=#__codelineno-0-71></a>├── fixtures/                     # [TEST DATA]
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72 href=#__codelineno-0-72></a>│   └── sample_vehicles/          # Sample vehicle data for testing
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73 href=#__codelineno-0-73></a>├── schemas/                      # [DATABASE SCHEMAS]
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74 href=#__codelineno-0-74></a>│   ├── sqlite/
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75 href=#__codelineno-0-75></a>│   │   └── schema.sql            # SQLite schema definition
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76 href=#__codelineno-0-76></a>│   └── postgresql/
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77 href=#__codelineno-0-77></a>│       └── schema.sql            # PostgreSQL schema definition
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78 href=#__codelineno-0-78></a>├── docker/
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79 href=#__codelineno-0-79></a>│   ├── Dockerfile                # API server container
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80 href=#__codelineno-0-80></a>│   └── docker-compose.yml        # Local development setup
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81 href=#__codelineno-0-81></a>├── Cargo.toml                    # Workspace Root Config
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82 href=#__codelineno-0-82></a>├── .releaserc.json               # Semantic Release Config
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83 href=#__codelineno-0-83></a>├── README.md                     # Project Overview
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84 href=#__codelineno-0-84></a>└── docs/
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85 href=#__codelineno-0-85></a>    ├── ARCHITECTURE.md           # This Document
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86 href=#__codelineno-0-86></a>    └── RUST_GUIDELINES.md        # Rust Development Standards
</span></code></pre></div> <hr> <h2 id=3-system-relationship-diagram>3. System Relationship Diagram<a class=headerlink href=#3-system-relationship-diagram title="Anchor link to this section for reference">&para;</a></h2> <p>This diagram visualizes the dependencies and data flow boundaries. All dependencies point <strong>inward</strong> toward <code>ev-core</code>.</p> <pre class=mermaid><code>graph TD
    subgraph "Data Sources"
        Dataset[Dataset Repository&lt;br/&gt;Layered JSON Files]
    end

    subgraph "Build-Time (CI/CD)"
        ETL[ev-etl CLI]

        subgraph "Output Artifacts"
            JSON[vehicles.json]
            SQLite[vehicles.db]
            PostgreSQL[vehicles.sql]
            CSV[vehicles.csv]
            XML[vehicles.xml]
        end
    end

    subgraph "Runtime (Production)"
        Server[ev-server&lt;br/&gt;REST API]
        DB[(Database&lt;br/&gt;SQLite/PostgreSQL)]
        Client[HTTP Clients]
    end

    subgraph "Core Domain"
        Core[ev-core&lt;br/&gt;Domain Types]
    end

    Dataset --&gt;|Read| ETL
    Core --&gt;|Used by| ETL
    Core --&gt;|Used by| Server

    ETL --&gt;|Generate| JSON
    ETL --&gt;|Generate| SQLite
    ETL --&gt;|Generate| PostgreSQL
    ETL --&gt;|Generate| CSV
    ETL --&gt;|Generate| XML

    SQLite -.-&gt;|Deploy| DB
    PostgreSQL -.-&gt;|Deploy| DB

    Server --&gt;|Query| DB
    Client --&gt;|HTTP Request| Server
    Server --&gt;|JSON Response| Client
</code></pre> <h3 id=dependency-flow>Dependency Flow<a class=headerlink href=#dependency-flow title="Anchor link to this section for reference">&para;</a></h3> <ol> <li><strong>ev-core</strong> is the foundation - no dependencies</li> <li><strong>ev-etl</strong> depends on ev-core for types and validation</li> <li><strong>ev-server</strong> depends on ev-core for types and serialization</li> <li><strong>Output artifacts</strong> are standalone - no runtime dependencies on Rust code</li> </ol> <hr> <h2 id=4-operational-data-flow>4. Operational Data Flow<a class=headerlink href=#4-operational-data-flow title="Anchor link to this section for reference">&para;</a></h2> <p>This sequence diagram illustrates both the <strong>Build-Time Pipeline</strong> (artifact generation) and the <strong>Runtime Path</strong> (API consumption).</p> <pre class=mermaid><code>sequenceDiagram
    autonumber
    participant Contributor
    participant DatasetRepo as Dataset Repository
    participant CI as GitHub Actions
    participant ETL as ev-etl CLI
    participant Artifacts as Release Artifacts
    participant Deploy as Deployment
    participant API as ev-server
    participant Client as API Consumer

    note over Contributor, Artifacts: BUILD-TIME PIPELINE

    Contributor-&gt;&gt;DatasetRepo: Commit JSON changes
    DatasetRepo-&gt;&gt;CI: Trigger workflow
    CI-&gt;&gt;ETL: Run cargo build --release -p ev-etl
    ETL-&gt;&gt;ETL: Load layered JSON files
    ETL-&gt;&gt;ETL: Deep merge (base → year → variant)
    ETL-&gt;&gt;ETL: Validate against schema
    ETL-&gt;&gt;Artifacts: Generate vehicles.json
    ETL-&gt;&gt;Artifacts: Generate vehicles.db (SQLite)
    ETL-&gt;&gt;Artifacts: Generate vehicles.sql (PostgreSQL)
    ETL-&gt;&gt;Artifacts: Generate vehicles.csv
    ETL-&gt;&gt;Artifacts: Generate vehicles.xml
    CI-&gt;&gt;DatasetRepo: Attach artifacts to release

    note over Deploy, Client: RUNTIME PATH

    Deploy-&gt;&gt;API: Deploy ev-server + vehicles.db
    API-&gt;&gt;API: Load database into memory
    Client-&gt;&gt;API: GET /api/v1/vehicles?make=tesla
    API-&gt;&gt;API: Query local database
    API--&gt;&gt;Client: Return JSON response

    Client-&gt;&gt;API: GET /api/v1/vehicles/tesla/model_3/2024
    API-&gt;&gt;API: Query by composite key
    API--&gt;&gt;Client: Return vehicle details
</code></pre> <h3 id=pipeline-stages>Pipeline Stages<a class=headerlink href=#pipeline-stages title="Anchor link to this section for reference">&para;</a></h3> <h4 id=build-time-cicd>Build-Time (CI/CD)<a class=headerlink href=#build-time-cicd title="Anchor link to this section for reference">&para;</a></h4> <ol> <li><strong>Trigger</strong>: Dataset repository receives commits</li> <li><strong>Compilation</strong>: ETL reads and merges layered JSON</li> <li><strong>Validation</strong>: Schema validation + business rules</li> <li><strong>Generation</strong>: Multiple output formats created</li> <li><strong>Distribution</strong>: Artifacts attached to GitHub releases</li> </ol> <h4 id=runtime-api-server>Runtime (API Server)<a class=headerlink href=#runtime-api-server title="Anchor link to this section for reference">&para;</a></h4> <ol> <li><strong>Initialization</strong>: Server loads pre-built database</li> <li><strong>Request Handling</strong>: REST endpoints process queries</li> <li><strong>Query Execution</strong>: Fast lookups in local database</li> <li><strong>Response</strong>: JSON serialization and delivery</li> </ol> <hr> <h2 id=5-technology-stack-versioning>5. Technology Stack &amp; Versioning<a class=headerlink href=#5-technology-stack-versioning title="Anchor link to this section for reference">&para;</a></h2> <p>The project utilizes the <strong>Rust 2024 Edition</strong>. Below is the technology stack for the ecosystem.</p> <h3 id=51-language-environment>5.1. Language Environment<a class=headerlink href=#51-language-environment title="Anchor link to this section for reference">&para;</a></h3> <ul> <li><strong>Language:</strong> Rust</li> <li><strong>Edition:</strong> <code>2024</code> (Latest Stable Edition)</li> <li><strong>Toolchain:</strong> <code>stable</code> (Version 1.85+)</li> <li><strong>MSRV:</strong> 1.92.0 (Minimum Supported Rust Version)</li> </ul> <h3 id=52-core-libraries>5.2. Core Libraries<a class=headerlink href=#52-core-libraries title="Anchor link to this section for reference">&para;</a></h3> <table> <thead> <tr> <th>Crate</th> <th>Version</th> <th>Usage</th> </tr> </thead> <tbody> <tr> <td><strong>serde</strong></td> <td><code>1.0</code></td> <td>Serialization/deserialization framework</td> </tr> <tr> <td><strong>serde_json</strong></td> <td><code>1.0</code></td> <td>JSON parsing and generation</td> </tr> <tr> <td><strong>anyhow</strong></td> <td><code>1.0</code></td> <td>Application-level error handling (ETL, Server)</td> </tr> <tr> <td><strong>thiserror</strong></td> <td><code>2.0</code></td> <td>Library-level error definitions (ev-core)</td> </tr> </tbody> </table> <h3 id=53-etl-specific-libraries>5.3. ETL-Specific Libraries<a class=headerlink href=#53-etl-specific-libraries title="Anchor link to this section for reference">&para;</a></h3> <table> <thead> <tr> <th>Crate</th> <th>Version</th> <th>Usage</th> </tr> </thead> <tbody> <tr> <td><strong>walkdir</strong></td> <td><code>2.5+</code></td> <td>Recursive directory traversal</td> </tr> <tr> <td><strong>jsonschema</strong></td> <td><code>0.25+</code></td> <td>JSON schema validation</td> </tr> <tr> <td><strong>rusqlite</strong></td> <td><code>0.34+</code></td> <td>SQLite database generation</td> </tr> <tr> <td><strong>postgres</strong></td> <td><code>0.19+</code></td> <td>PostgreSQL SQL generation</td> </tr> <tr> <td><strong>csv</strong></td> <td><code>1.3+</code></td> <td>CSV serialization</td> </tr> <tr> <td><strong>quick-xml</strong></td> <td><code>0.37+</code></td> <td>XML serialization</td> </tr> <tr> <td><strong>rayon</strong></td> <td><code>1.10+</code></td> <td>Parallel processing of vehicle files</td> </tr> </tbody> </table> <h3 id=54-server-specific-libraries>5.4. Server-Specific Libraries<a class=headerlink href=#54-server-specific-libraries title="Anchor link to this section for reference">&para;</a></h3> <table> <thead> <tr> <th>Crate</th> <th>Version</th> <th>Usage</th> </tr> </thead> <tbody> <tr> <td><strong>axum</strong></td> <td><code>0.8+</code></td> <td>Web framework for REST API</td> </tr> <tr> <td><strong>tokio</strong></td> <td><code>1.42+</code></td> <td>Async runtime</td> </tr> <tr> <td><strong>tower</strong></td> <td><code>0.5+</code></td> <td>Middleware and service abstractions</td> </tr> <tr> <td><strong>tower-http</strong></td> <td><code>0.6+</code></td> <td>HTTP middleware (CORS, compression, tracing)</td> </tr> <tr> <td><strong>rusqlite</strong></td> <td><code>0.34+</code></td> <td>SQLite query layer</td> </tr> <tr> <td><strong>sqlx</strong></td> <td><code>0.8+</code></td> <td>PostgreSQL async query layer (optional)</td> </tr> <tr> <td><strong>utoipa</strong></td> <td><code>5.3+</code></td> <td>OpenAPI documentation generation</td> </tr> <tr> <td><strong>tracing</strong></td> <td><code>0.1+</code></td> <td>Structured logging</td> </tr> <tr> <td><strong>tracing-subscriber</strong></td> <td><code>0.3+</code></td> <td>Log collection and formatting</td> </tr> </tbody> </table> <h3 id=55-development-testing>5.5. Development &amp; Testing<a class=headerlink href=#55-development-testing title="Anchor link to this section for reference">&para;</a></h3> <table> <thead> <tr> <th>Crate</th> <th>Version</th> <th>Usage</th> </tr> </thead> <tbody> <tr> <td><strong>criterion</strong></td> <td><code>0.5+</code></td> <td>Benchmarking</td> </tr> <tr> <td><strong>proptest</strong></td> <td><code>1.6+</code></td> <td>Property-based testing</td> </tr> <tr> <td><strong>tempfile</strong></td> <td><code>3.14+</code></td> <td>Temporary file creation for tests</td> </tr> <tr> <td><strong>mockall</strong></td> <td><code>0.13+</code></td> <td>Mocking framework</td> </tr> </tbody> </table> <h3 id=56-infrastructure-deployment>5.6. Infrastructure &amp; Deployment<a class=headerlink href=#56-infrastructure-deployment title="Anchor link to this section for reference">&para;</a></h3> <ul> <li><strong>Container Runtime:</strong> Docker 27.0+</li> <li><strong>Container Orchestration:</strong> Kubernetes 1.30+ (optional)</li> <li><strong>CI/CD:</strong> GitHub Actions</li> <li><strong>Release Automation:</strong> semantic-release</li> <li><strong>Database (Production):</strong></li> <li>SQLite 3.45+ (embedded mode)</li> <li>PostgreSQL 16+ (server mode)</li> </ul> <h3 id=57-api-standards>5.7. API Standards<a class=headerlink href=#57-api-standards title="Anchor link to this section for reference">&para;</a></h3> <ul> <li><strong>OpenAPI Specification:</strong> 3.1.0</li> <li><strong>REST API Versioning:</strong> URL-based (<code>/api/v1/</code>)</li> <li><strong>Response Format:</strong> JSON (RFC 8259)</li> <li><strong>Date/Time Format:</strong> ISO 8601</li> <li><strong>Character Encoding:</strong> UTF-8</li> </ul> <hr> <h2 id=6-etl-pipeline-specification>6. ETL Pipeline Specification<a class=headerlink href=#6-etl-pipeline-specification title="Anchor link to this section for reference">&para;</a></h2> <h3 id=61-input-processing>6.1. Input Processing<a class=headerlink href=#61-input-processing title="Anchor link to this section for reference">&para;</a></h3> <h4 id=discovery-phase>Discovery Phase<a class=headerlink href=#discovery-phase title="Anchor link to this section for reference">&para;</a></h4> <ul> <li>Recursively scan the dataset repository <code>src/</code> directory</li> <li>Identify all manufacturer directories (first level)</li> <li>Identify all model directories (second level)</li> <li>Collect all JSON files: <code>base.json</code>, year directories, and variant files</li> </ul> <h4 id=file-classification>File Classification<a class=headerlink href=#file-classification title="Anchor link to this section for reference">&para;</a></h4> <ul> <li><strong>Base Files</strong>: <code>src/&lt;make&gt;/&lt;model&gt;/base.json</code></li> <li><strong>Year Base Files</strong>: <code>src/&lt;make&gt;/&lt;model&gt;/&lt;year&gt;/&lt;vehicle_slug&gt;.json</code></li> <li><strong>Variant Files</strong>: <code>src/&lt;make&gt;/&lt;model&gt;/&lt;year&gt;/&lt;vehicle_slug&gt;_&lt;variant_slug&gt;.json</code></li> </ul> <h3 id=62-merge-strategy>6.2. Merge Strategy<a class=headerlink href=#62-merge-strategy title="Anchor link to this section for reference">&para;</a></h3> <p>The ETL implements a <strong>deterministic deep merge</strong> with the following precedence (lowest to highest):</p> <ol> <li><strong>Model Base</strong> (<code>base.json</code>) - Shared attributes across all years</li> <li><strong>Year Base</strong> (<code>&lt;vehicle_slug&gt;.json</code>) - Specific year configuration</li> <li><strong>Variant</strong> (<code>&lt;vehicle_slug&gt;_&lt;variant_slug&gt;.json</code>) - Delta from year base</li> </ol> <h4 id=merge-rules>Merge Rules<a class=headerlink href=#merge-rules title="Anchor link to this section for reference">&para;</a></h4> <ul> <li><strong>Objects</strong>: Deep merge by key (recursive)</li> <li><strong>Scalars</strong> (string, number, boolean): Replace (higher precedence wins)</li> <li><strong>Arrays</strong>: Complete replacement (no concatenation)</li> <li><strong>Null values</strong>: Not allowed (use explicit empty states instead)</li> <li><strong>Unknown keys</strong>: Validation failure</li> </ul> <h4 id=output-cardinality>Output Cardinality<a class=headerlink href=#output-cardinality title="Anchor link to this section for reference">&para;</a></h4> <ul> <li>Each year base file produces <strong>one canonical vehicle</strong></li> <li>Each variant file produces <strong>one additional canonical vehicle</strong></li> <li>Example: <code>model_3.json</code> + <code>model_3_long_range.json</code> = 2 canonical vehicles</li> </ul> <h3 id=63-validation-pipeline>6.3. Validation Pipeline<a class=headerlink href=#63-validation-pipeline title="Anchor link to this section for reference">&para;</a></h3> <p>Each canonical vehicle must pass:</p> <ol> <li><strong>JSON Schema Validation</strong>: Against <code>schema.json</code> from dataset repository</li> <li><strong>Required Fields Check</strong>: All mandatory fields present</li> <li><strong>Type Validation</strong>: Correct data types for all fields</li> <li><strong>Business Rules</strong>:</li> <li>At least one battery capacity (gross or net)</li> <li>At least one charge port</li> <li>At least one rated range entry</li> <li>At least one source</li> <li>Valid slug patterns (lowercase, alphanumeric + underscore)</li> <li>Valid ISO codes (country, currency)</li> <li><strong>Referential Integrity</strong>: Variant files reference valid base vehicles</li> </ol> <h3 id=64-output-formats>6.4. Output Formats<a class=headerlink href=#64-output-formats title="Anchor link to this section for reference">&para;</a></h3> <h4 id=641-canonical-json-vehiclesjson>6.4.1. Canonical JSON (<code>vehicles.json</code>)<a class=headerlink href=#641-canonical-json-vehiclesjson title="Anchor link to this section for reference">&para;</a></h4> <p><strong>Format</strong>: Single JSON file with array of all canonical vehicles</p> <p><strong>Structure</strong>: <div class="language-json highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=p>{</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span><span class=nt>&quot;schema_version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1.0.0&quot;</span><span class=p>,</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span><span class=nt>&quot;generated_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2025-12-25T12:00:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>  </span><span class=nt>&quot;vehicle_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1234</span><span class=p>,</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>  </span><span class=nt>&quot;vehicles&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>    </span><span class=p>{</span><span class=w> </span><span class=cm>/* canonical vehicle 1 */</span><span class=w> </span><span class=p>},</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>    </span><span class=p>{</span><span class=w> </span><span class=cm>/* canonical vehicle 2 */</span><span class=w> </span><span class=p>},</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>    </span><span class=err>...</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>  </span><span class=p>],</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>  </span><span class=nt>&quot;metadata&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>    </span><span class=nt>&quot;etl_version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1.0.0&quot;</span><span class=p>,</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>    </span><span class=nt>&quot;dataset_commit&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;abc123def&quot;</span><span class=p>,</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>    </span><span class=nt>&quot;processing_time_ms&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5432</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Use Cases</strong>: - Direct JSON consumption by applications - Import into other systems - Data analysis and exploration</p> <h4 id=642-sqlite-database-vehiclesdb>6.4.2. SQLite Database (<code>vehicles.db</code>)<a class=headerlink href=#642-sqlite-database-vehiclesdb title="Anchor link to this section for reference">&para;</a></h4> <p><strong>Schema Design</strong>: Normalized relational structure</p> <p><strong>Tables</strong>: - <code>vehicles</code> - Core vehicle information - <code>battery_specs</code> - Battery specifications - <code>charging_specs</code> - Charging capabilities - <code>charge_ports</code> - Physical charge ports - <code>motors</code> - Electric motor details - <code>range_ratings</code> - Range by test cycle - <code>sources</code> - Data sources - <code>variants</code> - Variant metadata</p> <p><strong>Indexes</strong>: - Primary keys on all tables - Composite index on (make_slug, model_slug, year, trim_slug) - Index on make_slug, model_slug separately - Full-text search index on model names</p> <p><strong>Use Cases</strong>: - Embedded applications - Desktop applications - Quick queries without server setup - API server data source (embedded mode)</p> <h4 id=643-postgresql-schema-vehiclessql>6.4.3. PostgreSQL Schema (<code>vehicles.sql</code>)<a class=headerlink href=#643-postgresql-schema-vehiclessql title="Anchor link to this section for reference">&para;</a></h4> <p><strong>Contents</strong>: - Complete DDL (CREATE TABLE, CREATE INDEX) - INSERT statements for all data - Views for common queries - Functions for search operations</p> <p><strong>Features</strong>: - JSONB columns for complex nested data - GiST indexes for JSONB queries - Full-text search with tsvector - Materialized views for aggregations</p> <p><strong>Use Cases</strong>: - Production API deployments - Advanced analytics - Multi-tenant scenarios - High-concurrency environments</p> <h4 id=644-csv-export-vehiclescsv>6.4.4. CSV Export (<code>vehicles.csv</code>)<a class=headerlink href=#644-csv-export-vehiclescsv title="Anchor link to this section for reference">&para;</a></h4> <p><strong>Format</strong>: Flattened denormalized structure</p> <p><strong>Columns</strong>: - Vehicle identification (make, model, year, trim, variant) - Key specifications (battery, range, charging) - Performance metrics - Pricing information - Source URLs (concatenated)</p> <p><strong>Handling Complex Fields</strong>: - Arrays: Pipe-separated values (<code>value1|value2|value3</code>) - Objects: Dot notation (<code>battery.pack_capacity_kwh_net</code>) - Nested structures: Flattened to top level</p> <p><strong>Use Cases</strong>: - Spreadsheet analysis (Excel, Google Sheets) - Data science workflows (pandas, R) - Business intelligence tools - Legacy system integration</p> <h4 id=645-xml-export-vehiclesxml>6.4.5. XML Export (<code>vehicles.xml</code>)<a class=headerlink href=#645-xml-export-vehiclesxml title="Anchor link to this section for reference">&para;</a></h4> <p><strong>Format</strong>: Hierarchical XML structure</p> <p><strong>Root Element</strong>: <code>&lt;vehicles&gt;</code></p> <p><strong>Vehicle Structure</strong>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nt>&lt;vehicle</span><span class=w> </span><span class=na>id=</span><span class=s>&quot;oed:tesla:model_3:2024:base&quot;</span><span class=nt>&gt;</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span><span class=nt>&lt;make</span><span class=w> </span><span class=na>slug=</span><span class=s>&quot;tesla&quot;</span><span class=nt>&gt;</span>Tesla<span class=nt>&lt;/make&gt;</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=nt>&lt;model</span><span class=w> </span><span class=na>slug=</span><span class=s>&quot;model_3&quot;</span><span class=nt>&gt;</span>Model<span class=w> </span>3<span class=nt>&lt;/model&gt;</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>  </span><span class=nt>&lt;year&gt;</span>2024<span class=nt>&lt;/year&gt;</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>  </span><span class=nt>&lt;battery&gt;</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>    </span><span class=nt>&lt;pack_capacity_kwh_net&gt;</span>60.0<span class=nt>&lt;/pack_capacity_kwh_net&gt;</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>    </span><span class=cm>&lt;!-- ... --&gt;</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>  </span><span class=nt>&lt;/battery&gt;</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>  </span><span class=cm>&lt;!-- ... --&gt;</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=nt>&lt;/vehicle&gt;</span>
</span></code></pre></div></p> <p><strong>Features</strong>: - XML Schema (XSD) generation - Namespace support - XSLT transformation support</p> <p><strong>Use Cases</strong>: - Enterprise system integration - SOAP-based services - Government/regulatory systems - Legacy XML pipelines</p> <h3 id=65-error-handling-and-reporting>6.5. Error Handling and Reporting<a class=headerlink href=#65-error-handling-and-reporting title="Anchor link to this section for reference">&para;</a></h3> <h4 id=validation-errors>Validation Errors<a class=headerlink href=#validation-errors title="Anchor link to this section for reference">&para;</a></h4> <ul> <li>Collect all errors (don't fail fast)</li> <li>Categorize by severity: ERROR, WARNING, INFO</li> <li>Generate detailed error report with file paths and line numbers</li> </ul> <h4 id=statistics-generation>Statistics Generation<a class=headerlink href=#statistics-generation title="Anchor link to this section for reference">&para;</a></h4> <ul> <li>Total vehicles processed</li> <li>Variants generated</li> <li>Files scanned</li> <li>Validation failures</li> <li>Processing time per stage</li> </ul> <h4 id=exit-codes>Exit Codes<a class=headerlink href=#exit-codes title="Anchor link to this section for reference">&para;</a></h4> <ul> <li><code>0</code>: Success - all vehicles valid</li> <li><code>1</code>: Validation failures - some vehicles invalid</li> <li><code>2</code>: Schema errors - malformed JSON</li> <li><code>3</code>: File system errors - cannot read files</li> </ul> <hr> <h2 id=7-api-server-specification>7. API Server Specification<a class=headerlink href=#7-api-server-specification title="Anchor link to this section for reference">&para;</a></h2> <h3 id=71-architecture>7.1. Architecture<a class=headerlink href=#71-architecture title="Anchor link to this section for reference">&para;</a></h3> <p><strong>Pattern</strong>: Three-layer architecture - <strong>Presentation Layer</strong>: HTTP handlers and routing - <strong>Service Layer</strong>: Business logic and queries - <strong>Data Layer</strong>: Database abstraction</p> <h3 id=72-endpoints>7.2. Endpoints<a class=headerlink href=#72-endpoints title="Anchor link to this section for reference">&para;</a></h3> <h4 id=get-apiv1health>GET <code>/api/v1/health</code><a class=headerlink href=#get-apiv1health title="Anchor link to this section for reference">&para;</a></h4> <p>Health check endpoint</p> <p><strong>Response</strong>: <div class="language-json highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=p>{</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;healthy&quot;</span><span class=p>,</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>  </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1.0.0&quot;</span><span class=p>,</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>  </span><span class=nt>&quot;database&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;connected&quot;</span><span class=p>,</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>  </span><span class=nt>&quot;vehicle_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1234</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=p>}</span>
</span></code></pre></div></p> <h4 id=get-apiv1vehicles>GET <code>/api/v1/vehicles</code><a class=headerlink href=#get-apiv1vehicles title="Anchor link to this section for reference">&para;</a></h4> <p>List all vehicles with pagination and filtering</p> <p><strong>Query Parameters</strong>: - <code>make</code>: Filter by manufacturer (slug) - <code>model</code>: Filter by model (slug) - <code>year</code>: Filter by year - <code>vehicle_type</code>: Filter by type (suv, sedan, etc.) - <code>min_range_km</code>: Minimum range - <code>max_range_km</code>: Maximum range - <code>page</code>: Page number (default: 1) - <code>per_page</code>: Items per page (default: 20, max: 100)</p> <p><strong>Response</strong>: <div class="language-json highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=p>{</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nt>&quot;vehicles&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=cm>/* vehicle summaries */</span><span class=w> </span><span class=p>],</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>  </span><span class=nt>&quot;pagination&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=nt>&quot;page&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>    </span><span class=nt>&quot;per_page&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=p>,</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span><span class=nt>&quot;total&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1234</span><span class=p>,</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>    </span><span class=nt>&quot;total_pages&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>62</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=p>}</span>
</span></code></pre></div></p> <h4 id=get-apiv1vehiclesmakemodelyear>GET <code>/api/v1/vehicles/{make}/{model}/{year}</code><a class=headerlink href=#get-apiv1vehiclesmakemodelyear title="Anchor link to this section for reference">&para;</a></h4> <p>Get specific vehicle details</p> <p><strong>Path Parameters</strong>: - <code>make</code>: Manufacturer slug - <code>model</code>: Model slug - <code>year</code>: Model year</p> <p><strong>Response</strong>: Full canonical vehicle object</p> <h4 id=get-apiv1vehiclesmakemodelyearvariants>GET <code>/api/v1/vehicles/{make}/{model}/{year}/variants</code><a class=headerlink href=#get-apiv1vehiclesmakemodelyearvariants title="Anchor link to this section for reference">&para;</a></h4> <p>List all variants for a specific vehicle</p> <p><strong>Response</strong>: Array of variant vehicles</p> <h4 id=get-apiv1makes>GET <code>/api/v1/makes</code><a class=headerlink href=#get-apiv1makes title="Anchor link to this section for reference">&para;</a></h4> <p>List all manufacturers</p> <p><strong>Response</strong>: <div class="language-json highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=p>{</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>&quot;makes&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nt>&quot;slug&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tesla&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Tesla&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;vehicle_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>42</span><span class=w> </span><span class=p>},</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nt>&quot;slug&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;byd&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;BYD&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;vehicle_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>38</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=p>}</span>
</span></code></pre></div></p> <h4 id=get-apiv1makesmakemodels>GET <code>/api/v1/makes/{make}/models</code><a class=headerlink href=#get-apiv1makesmakemodels title="Anchor link to this section for reference">&para;</a></h4> <p>List all models for a manufacturer</p> <p><strong>Response</strong>: Array of models with vehicle counts</p> <h4 id=get-apiv1search>GET <code>/api/v1/search</code><a class=headerlink href=#get-apiv1search title="Anchor link to this section for reference">&para;</a></h4> <p>Full-text search across vehicles</p> <p><strong>Query Parameters</strong>: - <code>q</code>: Search query - <code>page</code>, <code>per_page</code>: Pagination</p> <p><strong>Response</strong>: Ranked search results</p> <h3 id=73-configuration>7.3. Configuration<a class=headerlink href=#73-configuration title="Anchor link to this section for reference">&para;</a></h3> <p>Configuration via environment variables:</p> <ul> <li><code>DATABASE_URL</code>: SQLite or PostgreSQL connection string</li> <li><code>PORT</code>: Server port (default: 3000)</li> <li><code>HOST</code>: Bind address (default: 0.0.0.0)</li> <li><code>LOG_LEVEL</code>: Logging level (debug, info, warn, error)</li> <li><code>CORS_ORIGINS</code>: Allowed CORS origins</li> <li><code>MAX_PAGE_SIZE</code>: Maximum items per page</li> <li><code>ENABLE_COMPRESSION</code>: Enable gzip compression</li> <li><code>ENABLE_OPENAPI</code>: Enable OpenAPI endpoint</li> </ul> <h3 id=74-performance-characteristics>7.4. Performance Characteristics<a class=headerlink href=#74-performance-characteristics title="Anchor link to this section for reference">&para;</a></h3> <p><strong>Targets</strong>: - Cold start: &lt; 100ms (with SQLite embedded) - Response time (p50): &lt; 10ms - Response time (p99): &lt; 50ms - Throughput: &gt; 10,000 req/s (single instance, cached) - Memory footprint: &lt; 100MB (with in-memory SQLite)</p> <hr> <h2 id=8-cicd-pipeline>8. CI/CD Pipeline<a class=headerlink href=#8-cicd-pipeline title="Anchor link to this section for reference">&para;</a></h2> <h3 id=81-dataset-repository-pipeline>8.1. Dataset Repository Pipeline<a class=headerlink href=#81-dataset-repository-pipeline title="Anchor link to this section for reference">&para;</a></h3> <p><strong>Triggered by</strong>: Push to <code>main</code> or release creation</p> <p><strong>Workflow: ETL Artifacts Generation</strong></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Generate Data Artifacts</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=nt>on</span><span class=p>:</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>  </span><span class=nt>push</span><span class=p>:</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>main</span><span class="p p-Indicator">]</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>  </span><span class=nt>release</span><span class=p>:</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>    </span><span class=nt>types</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>created</span><span class="p p-Indicator">]</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=nt>jobs</span><span class=p>:</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=w>  </span><span class=nt>build-etl</span><span class=p>:</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Checkout API repository</span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Install Rust toolchain</span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Build ev-etl in release mode</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a>
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a><span class=w>  </span><span class=nt>generate-artifacts</span><span class=p>:</span>
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Run ev-etl against dataset source</span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Generate all output formats</span>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Validate all artifacts</span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Calculate checksums</span>
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a><span class=w>  </span><span class=nt>publish-artifacts</span><span class=p>:</span>
</span><span id=__span-6-22><a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Upload to GitHub Release</span>
</span><span id=__span-6-23><a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Tag with semantic version</span>
</span><span id=__span-6-24><a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Generate release notes</span>
</span></code></pre></div> <p><strong>Artifacts Produced</strong>: - <code>vehicles.json</code> + <code>vehicles.json.sha256</code> - <code>vehicles.db</code> + <code>vehicles.db.sha256</code> - <code>vehicles.sql</code> + <code>vehicles.sql.sha256</code> - <code>vehicles.csv</code> + <code>vehicles.csv.sha256</code> - <code>vehicles.xml</code> + <code>vehicles.xml.sha256</code> - <code>validation-report.txt</code> - <code>statistics.json</code></p> <h3 id=82-api-repository-pipeline>8.2. API Repository Pipeline<a class=headerlink href=#82-api-repository-pipeline title="Anchor link to this section for reference">&para;</a></h3> <p><strong>Triggered by</strong>: Push, PR, or release</p> <p><strong>Workflow 1: Continuous Integration</strong></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CI</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=nt>on</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>push</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>pull_request</span><span class="p p-Indicator">]</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=nt>jobs</span><span class=p>:</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>  </span><span class=nt>test</span><span class=p>:</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cargo fmt --check</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cargo clippy -- -D warnings</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cargo test --all-features</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cargo test --doc</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=w>  </span><span class=nt>build</span><span class=p>:</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cargo build --release -p ev-etl</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cargo build --release -p ev-server</span>
</span></code></pre></div> <p><strong>Workflow 2: Release</strong></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Release</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=nt>on</span><span class=p>:</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>  </span><span class=nt>push</span><span class=p>:</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>main</span><span class="p p-Indicator">]</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=nt>jobs</span><span class=p>:</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>  </span><span class=nt>semantic-release</span><span class=p>:</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Run semantic-release</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Generate changelog</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Create GitHub release</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=w>  </span><span class=nt>build-binaries</span><span class=p>:</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Cross-compile for multiple platforms</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Upload binaries to release</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=w>  </span><span class=nt>build-docker</span><span class=p>:</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Build Docker image</span>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Push to container registry</span>
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Tag with semantic version</span>
</span></code></pre></div> <p><strong>Release Artifacts</strong>: - Binaries: <code>ev-etl-linux-x64</code>, <code>ev-etl-windows-x64</code>, <code>ev-etl-macos-arm64</code> - Binaries: <code>ev-server-linux-x64</code>, <code>ev-server-windows-x64</code>, <code>ev-server-macos-arm64</code> - Docker image: <code>ghcr.io/open-ev-data/ev-server:latest</code> - Docker image: <code>ghcr.io/open-ev-data/ev-server:v1.2.3</code></p> <hr> <h2 id=9-deployment-scenarios>9. Deployment Scenarios<a class=headerlink href=#9-deployment-scenarios title="Anchor link to this section for reference">&para;</a></h2> <h3 id=91-embedded-mode-sqlite>9.1. Embedded Mode (SQLite)<a class=headerlink href=#91-embedded-mode-sqlite title="Anchor link to this section for reference">&para;</a></h3> <p><strong>Use Case</strong>: Single-server deployments, edge locations, development</p> <p><strong>Setup</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1># Download artifacts</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>wget<span class=w> </span>https://github.com/.../vehicles.db
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>wget<span class=w> </span>https://github.com/.../ev-server-linux-x64
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=c1># Run server</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=nv>DATABASE_URL</span><span class=o>=</span>vehicles.db<span class=w> </span>./ev-server-linux-x64
</span></code></pre></div></p> <p><strong>Characteristics</strong>: - Zero external dependencies - &lt; 100MB total footprint - Single binary deployment - Fast startup time</p> <h3 id=92-container-deployment-docker>9.2. Container Deployment (Docker)<a class=headerlink href=#92-container-deployment-docker title="Anchor link to this section for reference">&para;</a></h3> <p><strong>Use Case</strong>: Cloud deployments, Kubernetes, scalability</p> <p><strong>Docker Compose</strong>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&#39;3.8&#39;</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=nt>services</span><span class=p>:</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span><span class=nt>api</span><span class=p>:</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/open-ev-data/ev-server:latest</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">DATABASE_URL=vehicles.db</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;3000:3000&quot;</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">./vehicles.db:/app/vehicles.db:ro</span>
</span></code></pre></div></p> <p><strong>Kubernetes Deployment</strong>: - Deployment with multiple replicas - ConfigMap for database file - HorizontalPodAutoscaler - Ingress for external access</p> <h3 id=93-postgresql-mode>9.3. PostgreSQL Mode<a class=headerlink href=#93-postgresql-mode title="Anchor link to this section for reference">&para;</a></h3> <p><strong>Use Case</strong>: High-concurrency production, multi-tenant</p> <p><strong>Setup</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1># Import schema</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>psql<span class=w> </span>-d<span class=w> </span>openev<span class=w> </span>-f<span class=w> </span>vehicles.sql
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=c1># Run server</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=nv>DATABASE_URL</span><span class=o>=</span>postgresql://user:pass@localhost/openev<span class=w> </span>./ev-server
</span></code></pre></div></p> <p><strong>Characteristics</strong>: - Advanced query capabilities - Connection pooling - Read replicas support - Full ACID compliance</p> <h3 id=94-serverless-edge-future>9.4. Serverless / Edge (Future)<a class=headerlink href=#94-serverless-edge-future title="Anchor link to this section for reference">&para;</a></h3> <p><strong>Platforms</strong>: AWS Lambda, Cloudflare Workers, Vercel Edge</p> <p><strong>Adaptations Required</strong>: - Separate WASM build target - Remote database connection - Cold start optimization - Response streaming</p> <hr> <h2 id=10-development-workflow>10. Development Workflow<a class=headerlink href=#10-development-workflow title="Anchor link to this section for reference">&para;</a></h2> <blockquote> <p><strong>Important</strong>: For detailed Rust coding standards, best practices, and implementation guidelines, see <a href=../RUST_GUIDELINES/ >RUST_GUIDELINES.md</a>.</p> </blockquote> <h3 id=101-initial-setup>10.1. Initial Setup<a class=headerlink href=#101-initial-setup title="Anchor link to this section for reference">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1># Clone API repository</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>git<span class=w> </span>clone<span class=w> </span>https://github.com/open-ev-data/open-ev-data-api.git
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=nb>cd</span><span class=w> </span>open-ev-data-api
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=c1># Install Rust toolchain</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>rustup<span class=w> </span>install<span class=w> </span>stable
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>rustup<span class=w> </span>default<span class=w> </span>stable
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=c1># Build all crates</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>cargo<span class=w> </span>build<span class=w> </span>--all
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=c1># Run tests</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>cargo<span class=w> </span><span class=nb>test</span><span class=w> </span>--all
</span></code></pre></div> <h3 id=102-etl-development-cycle>10.2. ETL Development Cycle<a class=headerlink href=#102-etl-development-cycle title="Anchor link to this section for reference">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1># Point to local dataset</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=nb>export</span><span class=w> </span><span class=nv>DATASET_PATH</span><span class=o>=</span>../open-ev-data-dataset/src
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=c1># Build and run ETL</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>cargo<span class=w> </span>run<span class=w> </span>-p<span class=w> </span>ev-etl<span class=w> </span>--<span class=w> </span><span class=se>\</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>  </span>--input<span class=w> </span><span class=nv>$DATASET_PATH</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>  </span>--output<span class=w> </span>./output<span class=w> </span><span class=se>\</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>  </span>--formats<span class=w> </span>json,sqlite,csv
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=c1># Validate output</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>cargo<span class=w> </span>run<span class=w> </span>-p<span class=w> </span>ev-etl<span class=w> </span>--<span class=w> </span><span class=se>\</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a><span class=w>  </span>--validate<span class=w> </span>./output/vehicles.json
</span></code></pre></div> <h3 id=103-server-development-cycle>10.3. Server Development Cycle<a class=headerlink href=#103-server-development-cycle title="Anchor link to this section for reference">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c1># Use test database</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>cargo<span class=w> </span>run<span class=w> </span>-p<span class=w> </span>ev-server<span class=w> </span>--<span class=w> </span><span class=se>\</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>  </span>--database<span class=w> </span>./output/vehicles.db<span class=w> </span><span class=se>\</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>  </span>--port<span class=w> </span><span class=m>3000</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=c1># Run with hot reload (cargo-watch)</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>cargo<span class=w> </span>watch<span class=w> </span>-x<span class=w> </span><span class=s1>&#39;run -p ev-server&#39;</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=c1># Run integration tests</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a>cargo<span class=w> </span><span class=nb>test</span><span class=w> </span>-p<span class=w> </span>ev-server<span class=w> </span>--test<span class=w> </span>integration
</span></code></pre></div> <h3 id=104-release-process>10.4. Release Process<a class=headerlink href=#104-release-process title="Anchor link to this section for reference">&para;</a></h3> <ol> <li><strong>Dataset Release</strong>: Triggers ETL artifact generation</li> <li><strong>API Development</strong>: Happens independently</li> <li><strong>API Release</strong>: semantic-release handles versioning</li> <li><strong>Docker Build</strong>: Automatic on API release</li> <li><strong>Deployment</strong>: Manual or automatic depending on environment</li> </ol> <hr> <h2 id=11-future-enhancements>11. Future Enhancements<a class=headerlink href=#11-future-enhancements title="Anchor link to this section for reference">&para;</a></h2> <h3 id=phase-2-api-improvements>Phase 2 - API Improvements<a class=headerlink href=#phase-2-api-improvements title="Anchor link to this section for reference">&para;</a></h3> <ul> <li>GraphQL endpoint alongside REST</li> <li>WebSocket support for real-time updates</li> <li>Advanced search with Elasticsearch</li> <li>Caching layer with Redis</li> <li>Rate limiting and API keys</li> </ul> <h3 id=phase-3-edge-computing>Phase 3 - Edge Computing<a class=headerlink href=#phase-3-edge-computing title="Anchor link to this section for reference">&para;</a></h3> <ul> <li>Cloudflare Workers deployment</li> <li>AWS Lambda@Edge support</li> <li>Global CDN distribution</li> <li>Sub-10ms response times worldwide</li> </ul> <h3 id=phase-4-analytics>Phase 4 - Analytics<a class=headerlink href=#phase-4-analytics title="Anchor link to this section for reference">&para;</a></h3> <ul> <li>Usage analytics and telemetry</li> <li>Popular vehicle tracking</li> <li>Search query analysis</li> <li>Performance monitoring dashboard</li> </ul> <h3 id=phase-5-data-quality>Phase 5 - Data Quality<a class=headerlink href=#phase-5-data-quality title="Anchor link to this section for reference">&para;</a></h3> <ul> <li>Automated data quality scoring</li> <li>Community contribution workflow</li> <li>Diff visualization for updates</li> <li>Historical data tracking (versioned snapshots)</li> </ul> <hr> <h2 id=12-summary>12. Summary<a class=headerlink href=#12-summary title="Anchor link to this section for reference">&para;</a></h2> <p>The OpenEV Data API provides a comprehensive solution for transforming the layered dataset into multiple consumption formats:</p> <p><strong>Core Strengths</strong>: 1. <strong>Build-Time Compilation</strong>: Data validation happens once, not on every request 2. <strong>Multiple Formats</strong>: Single source, five output formats 3. <strong>Type Safety</strong>: Rust's type system prevents invalid states 4. <strong>Performance</strong>: Optimized for read-heavy workloads 5. <strong>Portability</strong>: Works embedded (SQLite) or client-server (PostgreSQL) 6. <strong>Automation</strong>: Fully automated CI/CD pipeline</p> <p><strong>Architecture Benefits</strong>: - Clean separation of concerns (Hexagonal Architecture) - Testable and maintainable codebase - Independent deployability of components - Multiple deployment strategies supported</p> <p><strong>Integration Points</strong>: - Dataset updates trigger artifact regeneration - API releases follow semantic versioning - Multiple consumption patterns supported (files, API, embedded)</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../GET_STARTED/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Get Started"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Get Started </div> </div> </a> <a href=../TESTING/ class="md-footer__link md-footer__link--next" aria-label="Next: Testing"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Testing </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 OpenEV Data Contributors </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/open-ev-data target=_blank rel=noopener title="OpenEV Data on GitHub" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <label class=md-button for=__settings>Manage settings</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.path", "navigation.indexes", "navigation.top", "navigation.footer", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "content.tabs.link", "content.tooltips", "announce.dismiss"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>